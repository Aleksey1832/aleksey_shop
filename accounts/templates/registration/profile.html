{% extends "shop/base.html" %}
{% load static %}

{% block title %} Личный кабинет {% endblock %}

{% block content %}

  <div class="">
    <h2>Мой личный кабинет</h2>
    <hr>
    <table>
      <tr>
        <th>Имя пользователя</th>
        <td>{{ user.username  }}</td>
      </tr>
      <tr>
        <th>Телефон</th>
        <td>{{ user.profile.tel }}</td>
      </tr>
      <tr>
        <th>Дата рождения</th>
        <td>{{ user.profile.birth_date }}</td>
      </tr>
      <tr>
        <th>Страна</th>
        <td>{{ user.profile.country }}</td>
      </tr>
      <tr>
        <th>Город</th>
        <td>{{ user.profile.city }}</td>
      </tr>
      <tr>
        <th>Улица</th>
        <td>{{ user.profile.street }}</td>
      </tr>
      <tr>
        <th>Дом, кор., кв./офис</th>
        <td>{{ user.profile.address }}</td>
      </tr>
      <tr>
        <th>Почтовый код</th>
        <td>{{ user.profile.postal_code }}</td>
      </tr>
      <tr>
        <th>Пол</th>
        <td>{{ user.profile.gender }}</td>
      </tr>
    </table>

  <a href="{% url 'accounts:edit_profile' %}">Редактировать профиль |</a>
  <a href="{% url 'accounts:change_password_view' %}">Смена пароля |</a>
  <a href="{% url 'accounts:logout_view' %}">Выход</a>
  <hr>
    <h3>Активные заказы</h3>
      {% for order in active_orders %}
      <ul>
        <li>
          Заказы № {{ order.id }} от {{ order.created_at|date:"d.m.Y H:i" }} на сумму {{ order.get_total_cost }}
            <a href="{% url 'orders:cancel_order' order.id %}">Отменить заказ</a>
        </li>
      </ul>
        {% empty %}
          <p> У вас пока нет заказов </p>
      {% endfor %}
  <hr>
    <h3>Завершенные заказы</h3>
      {% for order in completed_orders %}
      <ul>
        <li>
          Заказы № {{ order.id }} от {{ order.created_at|date:"d.m.Y H:i" }} на сумму {{ order.get_total_cost }}
        </li>
      </ul>
        {% empty %}
          <p> Ни один заказ пока не выполнен </p>
      {% endfor %}
  <hr>
    <h3>Отмененные заказы</h3>
      {% for order in canceled_orders %}
      <ul>
        <li>
          Заказы № {{ order.id }} от {{ order.created_at|date:"d.m.Y H:i" }} на сумму {{ order.get_total_cost }}
        </li>
      </ul>
        {% empty %}
          <p> У вас пока нет отмененных заказов </p>
      {% endfor %}
  </div>

{% endblock %}
