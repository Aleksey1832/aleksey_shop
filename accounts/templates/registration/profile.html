{% extends "shop/base.html" %}
{% load static %}

{% block title %} Личный кабинет {% endblock %}

{% block content %}



    <div class="profile_container">
        <h2>Личный кабинет</h2>
        <hr>

        <div class="wrapper">
            <div class="tabs">
                <div class="tab">
                    <input type="radio" name="css-tabs" id="tab-1" checked class="tab-switch">
                    <label for="tab-1" class="tab-label">Личные данные</label>
                    <input type="radio" name="css-tabs" id="tab-2" checked class="tab-switch">
                    <label for="tab-2" class="tab-label">Активные заказы</label>


                    {#                  <div class="container_table">#}
                    <table class="container_table">
                        <tr>
                            <th>Имя пользователя:</th>
                            <td>{{ user.username }}</td>
                        </tr>
                        <tr>
                            <th>Имя и фамилия:</th>
                            <td>{{ user.first_name }} {{ user.last_name }}</td>
                        </tr>
                        <tr>
                            <th>E-mail:</th>
                            <td>{{ user.email }}</td>
                        </tr>
                        <tr>
                            <th>Пол:</th>
                            <td>{{ user.profile.gender }}</td>
                        </tr>
                        <tr>
                            <th>Телефон:</th>
                            <td>{{ user.profile.phone_number }}</td>
                        </tr>
                        <tr>
                            <th>Дата рождения</th>
                            <td>{{ user.profile.birth_date }}</td>
                        </tr>
                    </table>


                    {#              <div class="tab">#}
                    {#                    <input type="radio" name="css-tabs" id="tab-2" class="tab-switch">#}
                    {#                    <label for="tab-2" class="tab-label">Активные заказы</label>#}

                    <div class="container_table">
                        {% for order in active_orders %}
                            <ul>
                                <li>
                                    Заказы № {{ order.id }} от {{ order.created_at|date:"d.m.Y H:i" }} на
                                    сумму {{ order.get_total_cost }}
                                    <a href="{% url 'orders:cancel_order' order.id %}">Отменить заказ</a>
                                </li>
                            </ul>
                        {% empty %}
                            <p> У вас пока нет заказов </p>
                        {% endfor %}
                    </div>
                </div>
            </div>


        </div>

    </div>


    <h3>Активные заказы</h3>
    {% for order in active_orders %}
        <ul>
            <li>
                Заказы № {{ order.id }} от {{ order.created_at|date:"d.m.Y H:i" }} на сумму {{ order.get_total_cost }}
                <a href="{% url 'orders:cancel_order' order.id %}">Отменить заказ</a>
            </li>
        </ul>
    {% empty %}
        <p> У вас пока нет заказов </p>
    {% endfor %}
    <hr>
    <h3>Завершенные заказы</h3>
    {% for order in completed_orders %}
        <ul>
            <li>
                Заказы № {{ order.id }} от {{ order.created_at|date:"d.m.Y H:i" }} на сумму {{ order.get_total_cost }}
            </li>
        </ul>
    {% empty %}
        <p> Ни один заказ пока не выполнен </p>
    {% endfor %}
    <hr>
    <h3>Отмененные заказы</h3>
    {% for order in canceled_orders %}
        <ul>
            <li>
                Заказы № {{ order.id }} от {{ order.created_at|date:"d.m.Y H:i" }} на сумму {{ order.get_total_cost }}
            </li>
        </ul>
    {% empty %}
        <p> У вас пока нет отмененных заказов </p>
    {% endfor %}

    <div>
        <p>
        <a href="{% url 'accounts:add_address' %}">Добавить адрес доставки</a> |
        <a href="{% url 'accounts:edit_profile' %}">Редактировать профиль</a> |
        <a href="{% url 'accounts:change_password_view' %}">Смена пароля</a> |
        <a href="{% url 'accounts:logout_view' %}">Выход</a>
        </p>

        <hr>
        <h3>Адреса доставки</h3>
        {% for address in addresses %}
        <ul>
            <li> {{ address }} | <a href="{% url 'accounts:delete_address' address.id %}">Удалить адрес</a></li>
        </ul>
        {% empty %}
            <p> У вас пока нет сохраненных адресов </p>
        {% endfor %}
        <hr>


    </div>
{% endblock %}
